import{e as b,n as h,o as x}from"./chunk-ISZX7UJJ.js";import{a as v}from"./chunk-GJHPCQO5.js";import{$a as u,Bb as g,Ka as f,Ma as n,Na as i,Pa as d,Ua as a,Wa as c,Z as p,la as m,ua as s,va as l}from"./chunk-4SHVFP3A.js";var D=(()=>{class r{foodService;foodState;router;result=new m;file;hint="";loading=!1;constructor(t,e,o){this.foodService=t,this.foodState=e,this.router=o}onFile(t){let e=t.target;e.files&&e.files.length>0&&(this.file=e.files[0])}analyze(){if(!this.file)return;this.loading=!0;let t=new FormData;t.append("image",this.file),this.hint&&t.append("hint",this.hint),this.foodService.imageInput(t).subscribe({next:e=>{this.loading=!1,this.foodState.result=e,this.router.navigate(["/result"])},error:()=>{this.loading=!1,alert("Failed to analyze food")}})}static \u0275fac=function(e){return new(e||r)(l(x),l(v),l(b))};static \u0275cmp=p({type:r,selectors:[["app-image-input"]],outputs:{result:"result"},standalone:!0,features:[u],decls:17,vars:2,consts:[[1,"page"],[1,"input-card"],[1,"subtitle"],[1,"form-group"],[1,"file-upload"],["type","file","id","foodImage","accept","image/*","hidden","",3,"change"],["for","foodImage",1,"file-btn"],[1,"file-name"],[1,"primary-btn",3,"click","disabled"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),a(3,"Image Food Entry"),i(),n(4,"p",2),a(5,"Upload a food image for analysis"),i(),n(6,"div",3)(7,"label"),a(8,"Food image"),i(),n(9,"div",4)(10,"input",5),d("change",function(_){return o.onFile(_)}),i(),n(11,"label",6),a(12," \u{1F4F7} Choose Image "),i(),n(13,"span",7),a(14),i()()(),n(15,"button",8),d("click",function(){return o.analyze()}),a(16," Analyze Image \u{1F4F8} "),i()()()),e&2&&(s(14),c(" ",(o.file==null?null:o.file.name)||"No file selected"," "),s(),f("disabled",!o.file))},dependencies:[g,h],styles:[".subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:14px;margin-bottom:24px}.form-group[_ngcontent-%COMP%]{text-align:left;margin-bottom:24px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;margin-bottom:8px;display:block}.file-upload[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.file-btn[_ngcontent-%COMP%]{padding:10px 16px;background:#22c55e;color:#fff;border-radius:10px;cursor:pointer;font-weight:600;font-size:14px;transition:background .2s ease,transform .1s ease}.file-btn[_ngcontent-%COMP%]:hover{background:#16a34a;transform:translateY(-1px)}.file-name[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;max-width:180px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.primary-btn[_ngcontent-%COMP%]{width:100%;padding:14px;background:#22c55e;color:#fff;border:none;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;transition:background .2s ease,transform .1s ease}.primary-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#16a34a;transform:translateY(-1px)}.primary-btn[_ngcontent-%COMP%]:disabled{background:#bbf7d0;cursor:not-allowed}"]})}return r})();export{D as ImageInputComponent};
